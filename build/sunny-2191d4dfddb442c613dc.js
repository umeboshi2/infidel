webpackJsonp([4],{0:function(t,n,o){var e,r,i,u,c,p,a;a=o(32).start_with_user,i=o(3),p=o(24),e=o(31),e.set("applets",[{appname:"bumblr",name:"Bumblr",url:"#bumblr"},{appname:"sunny",name:"Clients",url:"#sunny"},{appname:"dbdocs",name:"DB Docs",url:"#dbdocs"},{appname:"todos",name:"To Dos",url:"#todos"}]),r=Backbone.Radio.channel("global"),u=Backbone.Radio.channel("messages"),r.reply("main:app:appmodel",function(){return e}),o(34),o(30),o(29),o(130),o(125),o(133),c=new i.Application,p(c,e),a(c),t.exports=c},33:function(t,n,o){var e,r,i,u,c,p,a,s,l=function(t,n){function o(){this.constructor=t}for(var e in n)_.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},_={}.hasOwnProperty;e=o(2),p=o(3),c=o(13).MainController,s=o(20).login_form,u=e.Radio.channel("global"),a=e.Radio.channel("messages"),i=e.Radio.channel("static-documents"),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype._view_resource=function(t){return o.e(0,function(n){return function(){var e,r;return e=o(103).FrontDoorMainView,r=new e({model:t}),n._show_content(r)}}(this))},n.prototype.view_page=function(t){var n,o;return n=i.request("get-document",t),o=n.fetch(),o.done(function(t){return function(){return t._view_resource(n)}}(this)),o.fail(function(t){return function(){return a.request("danger","Failed to get document")}}(this))},n.prototype.frontdoor_needuser=function(){var t;return t=u.request("current-user"),t.has("name")?this.frontdoor_hasuser(t):this.show_login()},n.prototype.show_login=function(){var t;return t=new e.Marionette.ItemView({template:s}),this._show_content(t)},n.prototype.frontdoor_hasuser=function(t){return this.default_view()},n.prototype.default_view=function(){return this.view_page("intro")},n.prototype.frontdoor=function(){var t;return t=u.request("main:app:appmodel"),t.get("needUser")?(console.log("needUser is true"),this.frontdoor_needuser()):this.view_page("intro")},n}(c),t.exports=r},34:function(t,n,o){var e,r,i,u,c=function(t,n){function o(){this.constructor=t}for(var e in n)p.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},p={}.hasOwnProperty;e=o(12),r=o(33),i=Backbone.Radio.channel("global"),u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return c(n,t),n.prototype.empty_sidebar_on_route=!0,n.prototype.appRoutes={"":"frontdoor",frontdoor:"frontdoor","frontdoor/view":"frontdoor","frontdoor/view/:name":"view_page","frontdoor/login":"show_login","pages/:name":"view_page"},n}(e),i.reply("applet:frontdoor:route",function(){var t,n;return t=new r(i),n=new u({controller:t})})},123:function(t,n,o){var e,r,i,u,c,p=function(t,n){function o(){this.constructor=t}for(var e in n)a.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},a={}.hasOwnProperty;i=o(13).MainController,r=Backbone.Radio.channel("global"),u=Backbone.Radio.channel("messages"),c=Backbone.Radio.channel("resources"),e=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,t),n.prototype.collection=c.request("document-collection"),n.prototype.list_pages=function(){return console.log("List Pages"),o.e(0,function(t){return function(){var n,e,r;return n=o(180),r=new n({collection:t.collection}),e=t.collection.fetch(),e.done(function(){return t._show_content(r)}),e.fail(function(){return u.request("danger","Failed to load clients.")})}}(this))},n.prototype.edit_page=function(t){return o.e(1,function(n){return function(){var e,r;return e=o(100).EditPageView,r=c.request("get-document",t),n._load_view(e,r)}}(this))},n.prototype.new_page=function(){return o.e(1,function(t){return function(){var n;return n=o(100).NewPageView,t._show_content(new n)}}(this))},n}(i),t.exports=e},124:function(t,n,o){var e,r,i,u,c,p,a=function(t,n){function o(){this.constructor=t}for(var e in n)s.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},s={}.hasOwnProperty;e=o(2),p=o(25).make_dbchannel,u=e.Radio.channel("resources"),c="/api/dev/sitedocuments",r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.urlRoot=c,n}(e.Model),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.url=c,n.prototype.model=r,n}(e.Collection),p(u,"document",r,i),t.exports={DocumentCollection:i}},125:function(t,n,o){var e,r,i,u,c,p=function(t,n){function o(){this.constructor=t}for(var e in n)a.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},a={}.hasOwnProperty;e=o(12),o(124),r=o(123),i=Backbone.Radio.channel("global"),u=Backbone.Radio.channel("resources"),c=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,t),n.prototype.empty_sidebar_on_route=!0,n.prototype.appRoutes={dbdocs:"list_pages","dbdocs/documents/new":"new_page","dbdocs/documents/edit/:id":"edit_page"},n}(e),i.reply("applet:dbdocs:route",function(){var t,n;return t=new r(i),n=new c({controller:t})})},128:function(t,n,o){var e,r,i,u,c,p,a=function(t,n){function o(){this.constructor=t}for(var e in n)s.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},s={}.hasOwnProperty;p=o(9),i=o(13).MainController,r=Backbone.Radio.channel("global"),u=Backbone.Radio.channel("messages"),c=Backbone.Radio.channel("sunny"),e=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.clients=c.request("client-collection"),n.prototype.list_clients=function(){return o.e(0,function(t){return function(){var n,e,r;return n=o(183),r=new n({collection:t.clients}),e=t.clients.fetch(),e.done(function(){return t._show_content(r)}),e.fail(function(){return u.request("danger","Failed to load clients.")})}}(this))},n.prototype.new_client=function(){return o.e(0,function(t){return function(){var n;return n=o(101).NewClientView,t._show_content(new n)}}(this))},n.prototype.add_yard=function(t){return o.e(0,function(t){return function(){var n;return n=o(185).NewYardView,t._show_content(new n)}}(this))},n.prototype._show_edit_client=function(t,n){var o;return o=new t({model:n}),this._show_content(o)},n.prototype.edit_client=function(t){return o.e(0,function(n){return function(){var e,r,i;return e=o(101).EditClientView,r=c.request("get-client",t),r.has("name")?n._show_edit_client(e,r):(i=r.fetch(),i.done(function(){return n._show_edit_client(e,r)}),i.fail(function(){return u.request("danger","Failed to load client data.")}))}}(this))},n.prototype.view_client=function(t){return o.e(0,function(n){return function(){var e,r,i;return e=o(184),r=c.request("get-client",t),r.has("name")?n._show_view(e,r):(i=r.fetch(),i.done(function(){var t,o;return t=c.request("yard-collection"),o=t.fetch({data:{client_id:r.id}}),o.done(function(){return n._show_view(e,r)}),o.fail(function(){return u.request("danger","Failed to load yards.")})}),i.fail(function(){return u.request("danger","Failed to load client data.")}))}}(this))},n}(i),t.exports=e},129:function(t,n,o){var e,r,i,u,c,p,a,s,l=function(t,n){function o(){this.constructor=t}for(var e in n)_.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},_={}.hasOwnProperty;e=o(2),a=o(25).make_dbchannel,u=e.Radio.channel("sunny"),s="/api/dev/sunny/clients",r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype.urlRoot=s,n}(e.Model),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype.model=r,n.prototype.url=s,n}(e.Collection),a(u,"client",r,i),s="/api/dev/sunny/yards",c=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype.urlRoot=s,n}(e.Model),p=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype.model=c,n.prototype.url=s,n}(e.Collection),a(u,"yard",c,p),t.exports={ClientCollection:i,YardCollection:p}},130:function(t,n,o){var e,r,i,u,c,p=function(t,n){function o(){this.constructor=t}for(var e in n)a.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},a={}.hasOwnProperty;e=o(12),o(129),r=o(128),i=Backbone.Radio.channel("global"),c=Backbone.Radio.channel("sunny"),u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,t),n.prototype.empty_sidebar_on_route=!0,n.prototype.appRoutes={sunny:"list_clients","sunny/clients":"list_clients","sunny/clients/new":"new_client","sunny/clients/edit/:id":"edit_client","sunny/clients/view/:id":"view_client","sunny/clients/addyard/:client_id":"add_yard"},n}(e),i.reply("applet:sunny:route",function(){var t,n;t=new r(i),c.reply("main-controller",function(){return t}),c.reply("edit-client",function(n){return t.edit_client(n)}),n=new u({controller:t})})},131:function(t,n,o){var e,r,i,u,c,p,a=function(t,n){function o(){this.constructor=t}for(var e in n)s.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},s={}.hasOwnProperty;p=o(9),i=o(13).MainController,r=Backbone.Radio.channel("global"),u=Backbone.Radio.channel("messages"),c=Backbone.Radio.channel("todos"),e=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,t),n.prototype.collection=c.request("todo-collection"),n.prototype.list_todos=function(){return o.e(0,function(t){return function(){var n,e,r;return n=o(186),r=new n({collection:t.collection}),e=t.collection.fetch(),e.done(function(){return t._show_content(r)}),e.fail(function(){return u.request("danger","Failed to load todos.")})}}(this))},n.prototype.new_todo=function(){return o.e(0,function(t){return function(){var n;return n=o(102).NewView,t._show_content(new n)}}(this))},n.prototype.edit_todo=function(t){return o.e(0,function(n){return function(){var e,r;return e=o(102).EditView,r=c.request("get-todo",t),n._load_view(e,r,"todo")}}(this))},n.prototype.view_todo=function(t){return o.e(0,function(n){return function(){var e,r;return e=o(187),r=c.request("get-todo",t),n._load_view(e,r,"todo")}}(this))},n}(i),t.exports=e},132:function(t,n,o){var e,r,i,u,c,p,a,s,l=function(t,n){function o(){this.constructor=t}for(var e in n)_.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},_={}.hasOwnProperty;e=o(2),r=o(35).BaseCollection,p=o(25).make_dbchannel,u=e.Radio.channel("todos"),s="/api/dev/todos",i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype.urlRoot=s,n}(e.Model),c=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype.url=s,n.prototype.model=i,n}(e.Collection),a=new c,p(u,"todo",i,c),t.exports={TodoCollection:c}},133:function(t,n,o){var e,r,i,u,c,p=function(t,n){function o(){this.constructor=t}for(var e in n)a.call(n,e)&&(t[e]=n[e]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t},a={}.hasOwnProperty;e=o(12),o(132),r=o(131),i=Backbone.Radio.channel("global"),c=Backbone.Radio.channel("todos"),u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return p(n,t),n.prototype.empty_sidebar_on_route=!0,n.prototype.appRoutes={todos:"list_todos","todos/todos/new":"new_todo","todos/todos/edit/:id":"edit_todo","todos/todos/view/:id":"view_todo"},n}(e),i.reply("applet:todos:route",function(){var t,n;t=new r(i),c.reply("main-controller",function(){return t}),n=new u({controller:t})})}});