webpackJsonp([3],[function(t,e,n){n(59),n(25),n(9),n(26),n(99),n(12),n(13),n(61),n(98),n(38),n(63),n(40),n(68),n(60),n(37),n(100),n(39),n(20),n(64),n(65),n(66),t.exports=n(67)},,,,,,,,,function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_,h,m,y,v,g,b,w,x;r=n(5),i=n(4),o=n(2),a=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},u=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},s=function(t,e){var n,r,o;r=t.create();for(n in e)o=e[n],r.set(n,o);return t.add(r),t.save()},c=function(t,e){var n;return n=t.get(e),void 0===n?new t.model({id:e}):n},l=function(t){return console.warn("handle_newlines being replaced by newline_2_br"),t.replace(/(?:\r\n|\r|\n)/g,"<br />")},p=function(t){var e,n,r,o;for(o={},n=0,r=t.length;n<r;n++)e=t[n],o[e]='input[name="'+e+'"]';return o},d=function(t,e,n){var r;return null==n&&(n="POST"),r={type:n,url:t,data:JSON.stringify(e),accepts:"application/json",contentType:"application/json"}},f=function(t,e,n){var o;return null==n&&(n="POST"),o=d(t,e,n),r.ajax(o)},_=function(t,e){return t.reply("get-navbar-color",function(){var t;return t=r(e),t.css("color")}),t.reply("get-navbar-bg-color",function(){var t;return t=r(e),t.css("background-color")})},h=function(t){var e,n,o,i,a,u,s;for(a=t.split("/")[0],u=r("#navbar-view li"),s=[],e=0,n=u.length;e<n;e++)o=u[e],i=r(o),i.removeClass("active"),a===i.attr("appname")?s.push(i.addClass("active")):s.push(void 0);return s},m=function(t){var e;return""===t.split("/")[0]?window.location=t:(e=new o.Router,e.navigate(t,{trigger:!0}))},y=function(t){return t.replace(/(?:\r\n|\r|\n)/g,"<br />")},v=function(t){var e;return e=Math.floor(Math.random()*t.length),t[e]},g=function(t){return t.replace(/\/$/,"")},b=function(){return window.scrollTo(0,0)},w=function(){return r("html, body").animate({scrollTop:0},"fast")},x=function(t,e){var n,r;return r=this.toString(),("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>r.length)&&(e=r.length),e-=t.length,n=r.indexOf(t,e),n!==-1&&n===e},t.exports={camel_to_kebab:a,capitalize:u,create_model:s,get_model:c,handle_newlines:l,make_field_input_ui:p,make_json_post_settings:d,make_json_post:f,navbar_color_handlers:_,navbar_set_active:h,navigate_to_url:m,random_choice:v,remove_trailing_slashes:g,scroll_top_fast:b,scroll_top_fast_jquery:w,string_endswith:x}},,,function(t,e,n){var r,o,i,a,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=n(2),i=n(3),a=n(9),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.onRoute=function(t,e,n){var r;if(a.navbar_set_active(e),this.getOption("empty_sidebar_on_route"))return r=this.getOption("controller"),r._empty_sidebar()},e}(r.Marionette.AppRouter),t.exports=o},function(t,e,n){var r,o,i,a,u,s,c,l,p,f=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;r=n(5),o=n(2),c=n(3),p=n(28),s=n(40),l=n(9),a=o.Radio.channel("global"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.init_page=function(){},e.prototype.scroll_top=l.scroll_top_fast,e.prototype.navigate_to_url=l.navigate_to_url,e.prototype.navbar_set_active=l.navbar_set_active,e}(o.Marionette.Object),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype._get_region=function(t){return a.request("main:app:get-region",t)},e.prototype._show_content=function(t){var e;return e=this._get_region("content"),e.show(t)},e.prototype._empty_sidebar=function(){var t;return t=this._get_region("sidebar"),t.empty(),t},e.prototype._make_sidebar=function(){var t,e;return t=this._empty_sidebar(),e=new this.sidebarclass({model:this.sidebar_model}),t.show(e)},e.prototype._show_view=function(t,e){var n;return n=new t({model:e}),this._show_content(n)},e.prototype._load_view=function(t,e,n){var r;return e.isEmpty()||1===Object.keys(e.attributes).length?(r=e.fetch(),r.done(function(n){return function(){return n._show_view(t,e)}}(this)),r.fail(function(t){return function(){var t;return t="Failed to load "+n+" data.",MessageChannel.request("danger",t)}}(this))):this._show_view(t,e)},e}(i),t.exports={BaseController:i,MainController:u}},,,,,,,function(t,e,n){var r,o,i,a,u,s,c,l,p;p=n(8),r=n(9).capitalize,o=p.renderable(function(t){return p.div(".form-group",function(){var e,n,r;return p.label(".control-label",{"for":t.input_id},t.label),r="#"+t.input_id+".form-control",e=t.input_attributes,n=p.input,(null!=t?t.input_type:void 0)?(n=p[t.input_type])(r,e,function(){return p.text(null!=t?t.content:void 0)}):n(r,e)})}),a=function(t){return p.renderable(function(e){return o({input_id:"input_"+t,label:r(t),input_attributes:{name:t,placeholder:t,value:e[t]}})})},s=function(t){return p.renderable(function(e){return o({input_id:"input_"+t,input_type:"textarea",label:r(t),input_attributes:{name:t,placeholder:t},content:e[t]})})},u=function(t,e){return p.renderable(function(n){return p.div(".form-group",function(){return p.label(".control-label",{"for":"select_"+t}),r(t)}),p.select(".form-control",{name:"select_"+t},function(){var r,o,i,a;for(a=[],r=0,o=e.length;r<o;r++)i=e[r],n[t]===i?a.push(p.option({selected:null,value:i},i)):a.push(p.option({value:i},i));return a})})},c=function(t,e){return null==t&&(t="/login"),null==e&&(e="POST"),p.renderable(function(n){return p.form({role:"form",method:e,action:t},function(){return o({input_id:"input_username",label:"User Name",input_attributes:{name:"username",placeholder:"User Name"}}),o({input_id:"input_password",label:"Password",input_attributes:{name:"password",type:"password",placeholder:"Type your password here...."}}),p.button(".btn.btn-default",{type:"submit"},"login")})})},i=c(),l=p.renderable(function(t){return o({input_id:"input_name",label:"Name",input_attributes:{name:"name",placeholder:"Name"}}),o({input_id:"input_content",input_type:p.textarea,label:"Content",input_attributes:{name:"content",placeholder:"..."}}),p.input(".btn.btn-default.btn-xs",{type:"submit",value:"Add"})}),t.exports={form_group_input_div:o,make_field_input:a,make_field_textarea:s,make_field_select:u,make_login_form:c,login_form:i,name_content_form:l}},,,,function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_,h,m,y=function(t,e){function n(){this.constructor=t}for(var r in e)v.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},v={}.hasOwnProperty;r=n(5),o=n(2),h=n(9).navigate_to_url,i=n(138),c=o.Radio.channel("global"),l=o.Radio.channel("messages"),_="/blog/ghost/api/v0.1/users/me?include=roles&status=all",s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.url=_,e.prototype.parse=function(t){return t.users[0]},e}(o.Model),d=new s,c.reply("current-user",function(){return d}),p=new i,c.reply("main:app:ghostauth",function(){return p}),f=function(t){return p=c.request("main:app:ghostauth"),console.log("auth auth",p),t=t||{},t.beforeSend=p.sendAuthHeader,console.log("sync",t),t},u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.sync=function(t,n,r){return r=f(r),e.__super__.sync.call(this,t,n,r)},e}(o.Model),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.sync=function(t,n,r){return r=f(r),e.__super__.sync.call(this,t,n,r)},e}(o.Collection),m=function(t){var e,n,r,o;return console.log("start_with_user"),console.log("auth",p),p.isAuthenticated()?(p.triggerRefresh(),o=c.request("current-user"),n=o.fetch({beforeSend:p.sendAuthHeader}),n.done(function(e){return function(){return t.start()}}(this)),n.fail(function(t){return function(){return console.log("Response failed",n)}}(this))):Object.keys(p.state).length&&p.state.expires_in?p.expiresIn()<=0?(r=p.getTime(),console.log("auth.refresh",p.state),e=p.refresh(),console.log("res",e),e.done(function(n){return function(){var n,i;return n=e.responseJSON,n.time=r,p.save(e.responseJSON),p.triggerRefresh(),o=c.request("current-user"),i=o.fetch({beforeSend:p.sendAuthHeader}),i.done(function(){return t.start()})}}(this))):void 0:t.start()},t.exports={start_with_user:m,GhostModel:u,GhostCollection:a}},function(t,e,n){var r,o,i,a,u,s,c;r=n(2),a=n(3),c=n(38),o=c.BootstrapModalRegion,u=c.SlideDownRegion,i=r.Radio.channel("global"),s=function(t,e){var n,a,s;return s=e.get("regions"),"modal"in s&&(s.modal=o),"navbar"in s&&(s.navbar=new u({el:s.navbar,speed:"slow"})),"content"in s&&(s.content=new u({el:s.content})),a=new r.Marionette.RegionManager,a.addRegions(s),n=a.get("navbar"),n.on("show",function(t){return function(){return i.trigger("appregion:navbar:displayed")}}(this)),i.reply("main:app:object",function(){return t}),i.reply("main:app:regions",function(){return a}),i.reply("main:app:get-region",function(t){return a.get(t)}),t.on("start",function(){var t,n,o,a,u,s,c;for(n=e.get("frontdoor_app"),i.request("applet:"+n+":route"),o=e.get("hasUser"),o&&i.request("applet:userprofile:route"),s=e.get("applets"),a=0,u=s.length;a<u;a++)t=s[a],(null!=t?t.appname:void 0)&&(c="applet:"+t.appname+":route",i.request(c));if(i.request("mainpage:init",e),!r.history.started)return r.history.start()})},t.exports=s},function(t,e,n){var r,o,i,a,u,s,c,l=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;r=n(2),o=n(3),c=n(9),i=c.create_model,a=c.get_model,s=function(t,e){var n,o,i,a;return a=o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype.urlRoot=e,n}(r.Model),i=n=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,t),n.prototype.model=a,n.prototype.url=e,n}(r.Model),{modelClass:a,collectionClass:i}},u=function(t,e,n,r){var o;return o=new r,t.reply(e+"-collection",function(){return o}),t.reply("new-"+e,function(){return new n}),t.reply("add-"+e,function(t){return i(o(t))}),t.reply("get-"+e,function(t){return a(o,t)})},t.exports={make_dbclasses:s,make_dbchannel:u}},,,,function(t,e,n){var r,o,i,a,u,s=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=n(12),i=n(121),a=Backbone.Radio.channel("global"),o=Backbone.Radio.channel("bumblr"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.appRoutes={bumblr:"start","bumblr/settings":"settings_page","bumblr/dashboard":"show_dashboard","bumblr/listblogs":"list_blogs","bumblr/viewblog/:id":"view_blog","bumblr/addblog":"add_new_blog"},e}(r),a.reply("applet:bumblr:route",function(){var t,e,n;return e=new i(a),t=o.request("get_local_blogs"),t.fetch(),n=new u({controller:e})})},function(t,e,n){var r,o,i,a,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=n(12),n(136),o=n(135),i=Backbone.Radio.channel("global"),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.appRoutes={profile:"show_profile","profile/editconfig":"edit_config","profile/chpassword":"change_password","profile/mapview":"view_map"},e}(r),i.reply("applet:userprofile:route",function(){var t,e;return t=new o(i),e=new a({controller:t})})},function(t,e,n){var r,o,i,a,u,s,c,l,p,f;r=n(5),c=n(5),a=n(4),o=n(2),p=n(140),i=p.BaseAppModel,s=p.appregions,f=n(8),l=f.renderable(function(){return f.div("#navbar-view-container"),f.div(".container-fluid",function(){return f.div(".row",function(){return f.div(".col-sm-12",function(){return f.div("#messages")}),f.div("#sidebar.col-sm-3.left-column"),f.div("#main-content.col-sm-9")})}),f.div("#footer"),f.div("#modal")}),u=new i({hasUser:!0,needUser:!1,brand:{name:"Infidel",url:"/"},layout_template:l,container:"container-fluid",regions:s}),t.exports=u},function(t,e,n){var r,o,i,a,u,s,c,l,p;r=n(5),o=n(2),u=n(3),n(41),n(29),c=n(137),l=n(59),p=n(24).start_with_user,n(60),n(37),n(139),a=o.Radio.channel("global"),s=o.Radio.channel("messages"),i=o.Radio.channel("static-documents"),a.reply("mainpage:init",function(t){var e;return e=a.request("main:app:object"),l(e),a.trigger("mainpage:displayed")}),a.on("appregion:navbar:displayed",function(){var t,e,n;return t=a.request("current-user"),n=new c({model:t}),e=a.request("main:app:get-region","usermenu"),e.show(n)}),t.exports={start_with_user:p}},,,function(t,e,n){var r,o,i=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(2),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.parse=function(t){return t.data},e}(r.Collection),t.exports={BaseCollection:o}},function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_,h=function(t,e){function n(){this.constructor=t}for(var r in e)m.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},m={}.hasOwnProperty;for(r=n(2),a=r.Radio.channel("global"),u=r.Radio.channel("messages"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.defaults={level:"info"},e}(r.Model),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.model=o,e}(r.Collection),d=new i,u.reply("messages",function(){return d}),s=function(t){return function(t,e,n){var r,i,a;return null==n&&(n=!1),a=new o({content:t,level:e,icon:n}),r=6e3,"danger"!==e&&(i=function(){return d.remove(a)},setTimeout(i,r)),d.add(a)}}(this),u.reply("display-message",function(t){return function(t,e,n){return null==e&&(e="info"),null==n&&(n=!1),console.warn("icon",n),s(t,e,n)}}(this)),_=["success","info","warning","danger","brand"],c=function(t){return u.reply(t,function(e){return function(e,n){return null==n&&(n=!1),s(e,t,n)}}(this))},l=0,p=_.length;l<p;l++)f=_[l],c(f);u.reply("delete-message",function(t){return function(t){return d.remove(t)}}(this)),t.exports={BaseMessageCollection:i}},function(t,e,n){var r,o,i,a,u,s,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;r=n(2),a=n(3),i=r.Radio.channel("global"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.slide_speed="fast",e.prototype.attachHtml=function(t){return this.$el.hide(),this.$el.html(t.el),this.$el.slideDown(this.slide_speed)},e}(r.Marionette.Region),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.el="#modal",e.prototype.backdrop=!1,e.prototype.getEl=function(t){var e;return e=$(t),e.attr("class","modal"),e},e.prototype.show=function(t){return e.__super__.show.call(this,t),this.$el.modal({backdrop:this.backdrop}),this.$el.modal("show")},e}(r.Marionette.Region),s=function(t,e){var n;return null==e&&(e=!1),n=i.request("main:app:get-region","modal"),n.backdrop=e,n.show(t)},t.exports={BootstrapModalRegion:o,show_modal:s,SlideDownRegion:u,modal:o,slideDown:u}},function(t,e,n){var r,o,i,a,u,s;s=n(8),u=s.component(function(t,e,n){return s.span(t+".btn.btn-default.btn-xs",n)}),r=s.component(function(t,e,n){return s.div(t+".btn.btn-default.btn-xs",n)}),i=s.renderable(function(t,e){return null==t&&(t="Close"),null==e&&(e="close"),s.div(".btn.btn-default.btn-xs",{"data-dismiss":"modal"},function(){return s.h4(".modal-title",function(){return s.i(".fa.fa-"+e),s.text(t)})})}),a=s.renderable(function(t){return s.button(".navbar-toggle",{type:"button","data-toggle":"collapse","data-target":"#"+t},function(){return s.span(".sr-only","Toggle Navigation"),s.span(".icon-bar"),s.span(".icon-bar"),s.span(".icon-bar")})}),o=s.component(function(t,e,n){return s.a(t+".dropdown-toggle",{href:e.href,"data-toggle":"dropdown"},n)}),t.exports={spanbutton:u,divbutton:r,modal_close_button:i,navbar_collapse_button:a,dropdown_toggle:o}},function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_,h,m,y=function(t,e){function n(){this.constructor=t}for(var r in e)v.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},v={}.hasOwnProperty;r=n(2),c=n(3),h=n(67),i=n(64),_=n(66),l=n(65),a=r.Radio.channel("global"),p=r.Radio.channel("messages"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.template=i.MainFluidLayoutTemplate,e}(r.Marionette.LayoutView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.template=h.nav_pt,e.prototype.regions={usermenu:"#user-menu",mainmenu:"#main-menu"},e}(r.Marionette.LayoutView),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.template=h.nav_pt_search,e}(r.Marionette.ItemView),m=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.template=l.user_menu,e}(r.Marionette.ItemView),f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.template=_.message_box,e.prototype.ui={close_button:"button.close"},e.prototype.events={"click @ui.close_button":"destroy_message"},e.prototype.destroy_message=function(){return p.request("delete-message",this.model)},e}(r.Marionette.ItemView),d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return y(e,t),e.prototype.childView=f,e}(r.Marionette.CollectionView),t.exports={MainPageLayout:u,MainSearchFormView:s,BootstrapNavBarView:o,UserMenuView:m,MessagesView:d}},,,,,,,,,,,,,,,,,,function(t,e,n){var r,o,i,a,u,s,c,l,p,f=function(t,e){function n(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;r=n(2),u=r.Radio.channel("bumblr"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.initialize=function(){return this.fetch(),this.on("change",this.save,this)},e.prototype.fetch=function(){return this.set(JSON.parse(localStorage.getItem(this.id)))},e.prototype.save=function(t,e){return localStorage.setItem(this.id,JSON.stringify(this.toJSON())),$.ajax({success:e.success,error:e.error})},e.prototype.destroy=function(t){return localStorage.removeItem(this.id)},e.prototype.isEmpty=function(){return _.size(this.attributes<=1)},e}(r.Model),c="//api.tumblr.com/v2",s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.id="bumblr_settings",e}(o),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.baseURL=c,e}(r.Model),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.url=function(){return this.baseURL+"/blog/"+this.id+"/info?api_key="+this.api_key+"&callback=?"},e}(i),p="4mhV8B1YQK6PUA2NW8eZZXVHjU55TPJ3UZnZGrbSoCnqJaxDyH",l=new s({consumer_key:p}),u.reply("get_app_settings",function(){return l}),t.exports={BlogInfo:a}},function(t,e,n){var r,o,i,a,u,s;r=n(2),i=n(3),n(41),n(29),n(37),u=n(40),o=r.Radio.channel("global"),a=r.Radio.channel("messages"),s=function(t){var e,n,r,i,s;return s=o.request("main:app:regions"),e=o.request("main:app:appmodel"),r={},e.has("layout_template")&&(r.template=e.get("layout_template")),n=new u.MainPageLayout(r),n.on("show",function(t){return function(){var t,n,r,o,i;return i=(null!=e?e.navbar_viewclass:void 0)?e.navbar_viewclass:u.BootstrapNavBarView,r=new i({model:e}),o=s.get("navbar"),o.show(r),t=new u.MessagesView({collection:a.request("messages")}),n=s.get("messages"),n.show(t)}}(this)),i=s.get("mainview"),i.show(n)},t.exports=s},function(t,e,n){var r,o,i,a,u,s,c,l,p=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;r=n(5),c=n(4),i=n(2),u=n(3),a=i.Radio.channel("global"),s=i.Radio.channel("messages"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.copy_status="copy",e.prototype._add_models=function(t,e){return this.reset(),this.add(t),this.copy_status=e},e.prototype.copy=function(t){return this._add_models(t,"copy")},e.prototype.cut=function(t){return this._add_models(t,"cut")},e.prototype.paste=function(){var t;return t=this.models.slice(),this.reset(),t},e}(i.Collection),l=new o,a.reply("main:app:app-clipboard",function(){return l}),t.exports={AppClipboard:o}},function(t,e,n){var r,o,i,a,u=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=n(4),o=n(3),i=n(57),r=function(t){function e(){this.invalid=u(this.invalid,this),this.valid=u(this.valid,this),e.__super__.constructor.apply(this,arguments),this.listenTo(this,"render",this.hideActivityIndicator),this.listenTo(this,"render",this.prepareModel),this.listenTo(this,"save:form:success",this.success),this.listenTo(this,"save:form:failure",this.failure)}return s(e,t),e.prototype.delegateEvents=function(t){return this.ui=a.extend(this._baseUI(),a.result(this,"ui")),this.events=a.extend(this._baseEvents(),a.result(this,"events")),e.__super__.delegateEvents.call(this,t)},e.prototype.tagName="form",e.prototype._baseUI=function(){return{submit:'input[type="submit"]',activityIndicator:".spinner"}},e.prototype._baseEvents=function(){var t;return t={"change [data-validation]":this.validateField,"blur [data-validation]":this.validateField,"keyup [data-validation]":this.validateField},t["click "+this.ui.submit]=this.processForm,t},e.prototype.createModel=function(){throw new Error("implement #createModel in your FormView subclass to return a Backbone model")},e.prototype.prepareModel=function(){return this.model=this.createModel(),this.setupValidation()},e.prototype.validateField=function(t){var e,n;return e=$(t.target).attr("data-validation"),n=$(t.target).val(),this.model.preValidate(e,n)?this.invalid(this,e):this.valid(this,e)},e.prototype.processForm=function(t){return t.preventDefault(),this.showActivityIndicator(),this.updateModel(),this.saveModel()},e.prototype.updateModel=function(){throw new Error("implement #updateModel in your FormView subclass to update the attributes of @model")},e.prototype.saveModel=function(){var t;return t={success:function(t){return function(){return t.trigger("save:form:success",t.model)}}(this),error:function(t){return function(){return t.trigger("save:form:failure",t.model)}}(this)},this.model.save({},t)},e.prototype.success=function(t){return this.render(),this.onSuccess(t)},e.prototype.onSuccess=function(t){return null},e.prototype.failure=function(t){return this.hideActivityIndicator(),this.onFailure(t)},e.prototype.onFailure=function(t){return null},e.prototype.showActivityIndicator=function(){return this.ui.activityIndicator.show(),this.ui.submit.hide()},e.prototype.hideActivityIndicator=function(){return this.ui.activityIndicator.hide(),this.ui.submit.show()},e.prototype.setupValidation=function(){return Backbone.Validation.unbind(this),Backbone.Validation.bind(this,{valid:this.valid,invalid:this.invalid})},e.prototype.valid=function(t,e,n){return this.$("[data-validation="+e+"]").removeClass("invalid").addClass("valid")},e.prototype.invalid=function(t,e,n,r){return this.failure(this.model),this.$("[data-validation="+e+"]").removeClass("valid").addClass("invalid")},e}(Backbone.Marionette.ItemView),t.exports=r},function(t,e,n){var r,o,i,a,u,s,c,l,p=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;r=n(5),l=n(4),o=n(2),u=n(3),a=o.Radio.channel("global"),s=o.Radio.channel("messages"),c=o.Radio.channel("resources"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.local_storage_key=null,e.prototype.initialize=function(){return this.fetch(),this.on("change",this.save,this)},e.prototype.fetch=function(){var t;return t=JSON.parse(localStorage.getItem(this.local_storage_key))||[],this.set(t)},e.prototype.save=function(t){return localStorage.setItem(this.local_storage_key,JSON.stringify(this.toJSON()))},e}(o.Collection),t.exports={BaseLocalStorageCollection:i}},function(t,e,n){var r,o,i,a,u,s,c,l=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;r=n(2),a=n(3),c=n(8),u=n(9).navigate_to_url,i=r.Radio.channel("bumblr"),s=c.renderable(function(t){return c.div(".sidebar-menu.btn-group-vertical",function(){var e,n,r,o,i;for(o=t.entries,i=[],n=0,r=o.length;n<r;n++)e=o[n],i.push(c.button(".sidebar-entry-button.btn.btn-default",{"button-url":e.url},function(){return c.text(e.name)}));return i})}),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template=s,e.prototype.events={"click .sidebar-entry-button":"sidebar_button_pressed"},e.prototype.sidebar_button_pressed=function(t){var e;return e=t.currentTarget.getAttribute("button-url"),u(e)},e}(r.Marionette.ItemView),t.exports=o},function(t,e,n){var r,o,i,a,u,s,c;c=n(8),r=c.renderable(function(){return c.div("#main-navbar.navbar.navbar-default.navbar-fixed-top",{role:"navigation"}),c.div(".container-fluid",function(){return c.div(".row",function(){return c.div("#sidebar.col-sm-2"),c.div("#main-content.col-sm-9")})}),c.div("#footer"),c.div("#modal")}),o=c.renderable(function(){return c.div("#main-navbar.navbar.navbar-default.navbar-fixed-top",{role:"navigation"}),c.div(".main-layout",function(){return c.div("#sidebar"),c.div("#main-content")}),c.div("#footer"),c.div("#modal")}),s=c.renderable(function(t){return c.div("#navbar-view-container"),c.div("."+t,function(){return c.div(".row",function(){return c.div(".col-md-10",function(){return c.div("#messages")})}),c.div(".row",function(){return c.div("#main-content.col-md-9"),c.div("#sidebar.col-md-3.right-column")})}),c.div("#footer"),c.div("#modal")}),u=function(){return s("container")},a=function(){return s("container-fluid")},i=c.renderable(function(t){var e;return e=t.data.attributes,c.article(".document-view.content",function(){return c.h1(e.title),c.p(".lead",e.description),c.div(".body",function(){return c.raw(e.body)})})}),t.exports={BootstrapLayoutTemplate:r,BootstrapNoGridLayoutTemplate:o,MainLayoutTemplate:u,MainFluidLayoutTemplate:a,MainContentTemplate:i}},function(t,e,n){var r,o,i;o=n(8),i=o.renderable(function(t){var e;return e=t.name,o.ul("#user-menu.ctx-menu.nav.navbar-nav",function(){return o.li(".dropdown",function(){return o.a(".dropdown-toggle",{"data-toggle":"dropdown"},function(){return void 0===e?o.text("Guest"):o.text(e),o.b(".caret")}),o.ul(".dropdown-menu",function(){var n,r,i,a,u;if(void 0===e)return o.li(function(){return o.a({href:"#frontdoor/login"},"login")});if(o.li(function(){return o.a({href:"#profile"},"Profile Page")}),n=!1,void 0!==e&&(i=t.groups,void 0!==i))for(a=0,u=i.length;a<u;a++)r=i[a],"admin"===r.name&&(n=!0);return"admin"===t.name&&(n=!0),n&&o.li(function(){var t,e;return t="/admin",e=window.location.pathname,""===e.split(t)[0]&&(t="#"),o.a({href:t},"Administer Site")}),o.li(function(){return o.a({href:"/logout"},"Logout")})})})})}),r=o.renderable(function(t){return o.div(".btn-group-vertical",function(){var e,n,r,i,a;for(i=t.entries,a=[],n=0,r=i.length;n<r;n++)e=i[n],a.push(o.div(".btn.btn-default.sidebar-entry-button",{"button-url":e.url},function(){return o.text(e.name)}));return a})}),t.exports={user_menu:i,main_sidebar:r}},function(t,e,n){var r,o,i,a;a=n(8),o=a.renderable(function(t){var e;return e=t.level,"error"===e&&(e="danger"),a.div(".alert.alert-"+e,function(){return a.button(".close",{type:"button","aria-hidden":!0},function(){return a.raw("&times;")}),t.icon&&a.span(".glyphicon.glyphicon-"+t.icon),a.text(t.content)})}),i=a.renderable(function(t){var e;return e=t.level,"error"===e&&(e="danger"),a.div(".alert-dismissable.alert.alert-"+e,function(){return a.button(".close",{type:"button","data-dismiss":"alert","aria-hidden":!0},function(){return a.raw("&times;")}),a.text(t.content)})}),r=a.renderable(function(){return a.div("#ace-editor",{style:"position:relative;width:100%;height:24em;"})}),t.exports={message_box:o,message_box_dismissable:i,ace_editor_div:r}},function(t,e,n){var r,o,i,a,u,s,c,l;l=n(8),c=n(39),s=c.navbar_collapse_button,o=c.dropdown_toggle,r=l.renderable(function(t){return l.div(".container",function(){return l.div("#navbar-brand.navbar-header",function(){return l.button(".navbar-toggle",{type:"button","data-toggle":"collapse","data-target":".navbar-collapse"},function(){return l.span(".sr-only","Toggle Navigation"),l.span(".icon-bar"),l.span(".icon-bar"),l.span(".icon-bar")}),l.a(".navbar-brand",{href:t.brand.url},t.brand.name)}),l.div(".navbar-collapse.collapse",function(){return l.ul("#app-navbar.nav.navbar-nav",function(){var e,n,r,o,i;for(o=t.applets,i=[],n=0,r=o.length;n<r;n++)e=o[n],i.push(l.li({appname:e.appname},function(){return l.a({href:e.url},e.name)}));return i}),l.ul("#main-menu.nav.navbar-nav.navbar-left"),l.ul("#user-menu.nav.navbar-nav.navbar-right")})})}),u=l.renderable(function(t){return l.form("#form-search.navbar-form.navbar-right",{role:"search",method:"post",action:""+t.navbarSearchAction},function(){return l.div(".form-group",function(){return l.input(".form-control",{name:"search-term",type:"search",placeholder:"Search..."})}),l.button(".btn.btn-default",{type:"submit",name:"search-submit",value:"search",style:"display: none;"},function(){return l.raw("&#8594")})})}),a=l.renderable(function(t){return l.div("."+(t.container||"container"),function(){return l.div(".navbar-header",function(){return s("navbar-view-collapse"),l.a(".navbar-brand",{href:t.brand.url},t.brand.name)}),l.div("#navbar-view-collapse.collapse.navbar-collapse",function(){return l.ul(".nav.navbar-nav",function(){var e,n,r,o,i;for(o=t.applets,i=[],n=0,r=o.length;n<r;n++)e=o[n],i.push(l.li({appname:e.appname},function(){return l.a({href:e.url},e.name)}));return i}),l.ul("#user-menu.nav.navbar-nav.navbar-right"),l.div("#form-search-container")})})}),i=l.renderable(function(t){return l.nav("#navbar-view.navbar.navbar-static-top.navbar-default",{xmlns:"http://www.w3.org/1999/xhtml","xml:lang":"en",role:"navigation"},function(){return a(t)})}),t.exports={nav_pt_search:u,nav_pt:i,BootstrapNavBarTemplate:r}},function(t,e,n){var r,o,i,a,u,s,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;r=n(2),i=r.Radio.channel("global"),a=r.Radio.channel("messages"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(r.Model),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e}(u),s=function(t){var e;return e=new o,e.url=t,e},i.reply("create-current-user-object",function(t){var e;return e=s(t),i.reply("current-user",function(){return e}),i.reply("update-user-config",function(t){var n;return e.set("config",t),n=e.save(),n.done(function(t){return function(){return e}}(this)),n.fail(function(t){return function(){return a.request("danger","failed to update user config!");
}}(this))}),e}),t.exports={User:u,CurrentUser:o}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r,o,i=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=n(61),r=function(t){function e(){return this.invalid=i(this.invalid,this),this.valid=i(this.valid,this),e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.valid=function(t,e,n){return this.$("[data-validation="+e+"]").parent().removeClass("has-error").addClass("has-success")},e.prototype.invalid=function(t,e,n,r){return this.failure(this.model),this.$("[data-validation="+e+"]").parent().removeClass("has-success").addClass("has-error")},e}(o),t.exports=r},function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_,h=function(t,e){function n(){this.constructor=t}for(var r in e)m.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},m={}.hasOwnProperty;r=n(2),c=n(3),_=n(8),f=n(9).navigate_to_url,d=n(38).show_modal,p=n(39).modal_close_button,s=r.Radio.channel("global"),l=r.Radio.channel("messages"),u=_.renderable(function(t){return _.div(".modal-dialog",function(){return _.div(".modal-content",function(){return _.h3("Do you really want to delete "+t.name+"?"),_.div(".modal-body",function(){return _.div("#selected-children")}),_.div(".modal-footer",function(){return _.ul(".list-inline",function(){var t;return t="btn.btn-default.btn-sm",_.li("#confirm-delete-button",function(){return p("OK","check")}),_.li("#cancel-delete-button",function(){return p("Cancel")})})})})})}),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.template=u,e.prototype.ui={confirm_delete:"#confirm-delete-button",cancel_button:"#cancel-delete-button"},e.prototype.events=function(){return{"click @ui.confirm_delete":"confirm_delete"}},e.prototype.confirm_delete=function(){var t,e;return t=this.model.get("name"),e=this.model.destroy(),e.done(function(e){return function(){return l.request("success",t+" deleted.")}}(this)),e.fail(function(e){return function(){return l.request("danger",t+" NOT deleted.")}}(this))},e}(r.Marionette.ItemView),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.ui={edit_item:".edit-item",delete_item:".delete-item",item:".list-item"},e.prototype.events=function(){return{"click @ui.edit_item":"edit_item","click @ui.delete_item":"delete_item"}},e.prototype.edit_item=function(){return f("#"+this.route_name+"/"+this.item_type+"s/edit/"+this.model.id)},e.prototype.delete_item=function(){var t;return t=new a({model:this.model}),d(t,!0)},e}(r.Marionette.ItemView),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.childViewContainer="#"+e.item_type+"-container",e.prototype.ui=function(){return{make_new_item:"#new-"+this.item_type}},e.prototype.events=function(){return{"click @ui.make_new_item":"make_new_item"}},e.prototype._show_modal=function(t,e){var n;return null==e&&(e=!1),n=s.request("main:app:get-region","modal"),n.backdrop=e,n.show(t)},e.prototype.make_new_item=function(){return f("#"+this.route_name+"/"+this.item_type+"s/new")},e}(r.Marionette.CompositeView),t.exports={BaseItemView:o,BaseListView:i}},function(t,e,n){var r,o,i,a,u,s;s=n(8),u=n(28),a=n(20).form_group_input_div,i=n(9).capitalize,r=function(t,e){return s.renderable(function(n){var r;return r=".btn.btn-default.btn-xs",s.li(".list-group-item."+t+"-item",function(){return s.span(function(){return s.a({href:"#"+e+"/"+t+"s/view/"+n.id},n.name)}),s.div(".btn-group.pull-right",function(){return s.button(".edit-item."+r+".btn-info.fa.fa-edit","edit"),s.button(".delete-item."+r+".btn-danger.fa.fa-close","delete")})})})},o=function(t){return s.renderable(function(e){return s.div(".listview-header",function(){return s.text(i(t))}),s.button("#new-"+t+".btn.btn-default",function(){return"Add New "+i(t)}),s.hr(),s.ul("#"+t+"-container.list-group")})},t.exports={base_item_template:r,base_list_template:o}},,,,,function(t,e,n){!function(e,r){t.exports=r(n(2))}(this,function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function n(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function r(t){return t===Object(t)}function o(t,e){for(var n=t.length;n--;)if(t[n]===e)return!0;return!1}function i(t,e){for(var n in e)t[n]=e[n];return t}function a(t,e){if(null!=t){var n=t[e];return"function"==typeof n?t[e]():n}}return t.LocalStorage=window.Store=function(t,e){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t,this.serializer=e||{serialize:function(t){return r(t)?JSON.stringify(t):t},deserialize:function(t){return t&&JSON.parse(t)}};var n=this.localStorage().getItem(this.name);this.records=n&&n.split(",")||[]},i(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||0===t.id||(t.id=n(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this._itemName(t.id),this.serializer.serialize(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){this.localStorage().setItem(this._itemName(t.id),this.serializer.serialize(t));var e=t.id.toString();return o(this.records,e)||(this.records.push(e),this.save()),this.find(t)},find:function(t){return this.serializer.deserialize(this.localStorage().getItem(this._itemName(t.id)))},findAll:function(){for(var t,e,n=[],r=0;r<this.records.length;r++)t=this.records[r],e=this.serializer.deserialize(this.localStorage().getItem(this._itemName(t))),null!=e&&n.push(e);return n},destroy:function(t){this.localStorage().removeItem(this._itemName(t.id));for(var e=t.id.toString(),n=0;n<this.records.length;n++)this.records[n]===e&&this.records.splice(n,1);return this.save(),t},localStorage:function(){return localStorage},_clear:function(){var t=this.localStorage(),e=new RegExp("^"+this.name+"-");t.removeItem(this.name);for(var n in t)e.test(n)&&t.removeItem(n);this.records.length=0},_storageSize:function(){return this.localStorage().length},_itemName:function(t){return this.name+"-"+t}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,n,r){var o,i,u=a(n,"localStorage")||a(n.collection,"localStorage"),s=t.$?t.$.Deferred&&t.$.Deferred():t.Deferred&&t.Deferred();try{switch(e){case"read":o=void 0!=n.id?u.find(n):u.findAll();break;case"create":o=u.create(n);break;case"update":o=u.update(n);break;case"delete":o=u.destroy(n)}}catch(c){i=22===c.code&&0===u._storageSize()?"Private browsing is unsupported":c.message}return o?(r&&r.success&&("0.9.10"===t.VERSION?r.success(n,o,r):r.success(o)),s&&s.resolve(o)):(i=i?i:"Record Not Found",r&&r.error&&("0.9.10"===t.VERSION?r.error(n,i,r):r.error(i)),s&&s.reject(i)),r&&r.complete&&r.complete(o),s&&s.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e,n){var r=n&&n.ajaxSync;return r||!a(e,"localStorage")&&!a(e.collection,"localStorage")?t.ajaxSync:t.localSync},t.sync=function(e,n,r){return t.getSyncMethod(n,r).apply(this,[e,n,r])},t.LocalStorage})},,,,,,,,,,,,,,,function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_,h,m,y,v,g=function(t,e){function n(){this.constructor=t}for(var r in e)b.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty;r=n(2),c=n(3),r.localStorage=n(105),p=n(55),o=n(62).BaseLocalStorageCollection,l=n(58),s=r.Radio.channel("global"),a=r.Radio.channel("bumblr"),_="//api.tumblr.com/v2",f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.url=function(){return _+"/"+this.id+"/posts/photo?callback=?"},e}(r.Collection),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.mode="server",e.prototype.full=!0,e.prototype.baseURL=_,e.prototype.url=function(){return this.baseURL+"/blog/"+this.base_hostname+"/posts/photo?api_key="+this.api_key},e.prototype.fetch=function(t){var n,r,o;return t||(t={}),r=t.data||{},n=this.state.currentPage,o=n*this.state.pageSize,t.offset=o,t.dataType="jsonp",e.__super__.fetch.call(this,t)},e.prototype.parse=function(t){var n;return n=t.response.total_posts,this.state.totalRecords=n,e.__super__.parse.call(this,t.response.posts)},e.prototype.state={firstPage:0,pageSize:15},e.prototype.queryParams={pageSize:"limit",offset:function(){return this.state.currentPage*this.state.pageSize}},e}(p),m=function(t){var e,n,r;return r=a.request("get_app_settings"),e=r.get("consumer_key"),n=new i,n.api_key=e,n.base_hostname=t,n},y="make_blog_post_collection",a.reply(y,function(t){return m(t)}),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e.prototype.model=l.BlogInfo,e.prototype.add_blog=function(t){var e,n;return n=t+".tumblr.com",e=new l.BlogInfo,e.set("id",n),e.set("name",t),e.api_key=this.api_key,this.add(e),this.save(),e.fetch(),e},e}(o),h=new u,v=a.request("get_app_settings"),d=v.get("consumer_key"),h.api_key=d,a.reply("get_local_blogs",function(){return h}),t.exports={PhotoPostCollection:f}},function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;r=n(5),o=n(2),f=n(9),s=n(13).MainController,l=n(58),a=n(120),c=n(122),p=n(123),i=o.Radio.channel("bumblr"),d=new o.Model({entries:[{name:"List Blogs",url:"#bumblr/listblogs"},{name:"Settings",url:"#bumblr/settings"}]}),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.sidebarclass=p,e.prototype.sidebar_model=d,e.prototype.set_header=function(t){var e;return e=r("#header"),e.text(t)},e.prototype.start=function(){var t,e;return t=this._get_region("content"),e=this._get_region("sidebar"),t.hasView()&&(console.log("empty content...."),t.empty()),e.hasView()&&(console.log("empty sidebar...."),e.empty()),this.set_header("Bumblr"),this.list_blogs()},e.prototype.show_mainview=function(){var t;return this._make_sidebar(),t=new c.MainBumblrView,this._show_content(t),f.scroll_top_fast()},e.prototype.show_dashboard=function(){var t;return this._make_sidebar(),t=new c.BumblrDashboardView,this._show_content(t),f.scroll_top_fast()},e.prototype.list_blogs=function(){return this._make_sidebar(),n.e(0,function(t){return function(){var e,r,o;return console.log("sidebar created"),r=i.request("get_local_blogs"),console.log("blogs",r),e=n(176),o=new e({collection:r}),t._show_content(o)}}(this))},e.prototype.view_blog=function(t){return this._make_sidebar(),n.e(0,function(e){return function(){var r,o,a,u;return a=t+".tumblr.com",o=i.request("make_blog_post_collection",a),r=n(178),u=o.fetch(),u.done(function(){var t;return t=new r({collection:o}),e._show_content(t),f.scroll_top_fast()})}}(this))},e.prototype.add_new_blog=function(){return this._make_sidebar(),n.e(0,function(t){return function(){var e,r;return e=n(177),r=new e,t._show_content(r),f.scroll_top_fast()}}(this))},e.prototype.settings_page=function(){return this._make_sidebar(),n.e(0,function(t){return function(){var e,r,o;return e=n(179),r=i.request("get_app_settings"),o=new e({model:r}),t._show_content(o),f.scroll_top_fast()}}(this))},e}(s),t.exports=u},function(t,e,n){var r,o,i,a,u,s,c,l,p=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;r=n(2),u=n(3),l=n(8),o=r.Radio.channel("bumblr"),c=l.renderable(function(t){return l.p("main bumblr view")}),s=l.renderable(function(t){return l.p("bumblr_dashboard_view")}),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.template=c,e}(r.Marionette.ItemView),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.template=s,e}(r.Marionette.ItemView),t.exports={MainBumblrView:a,BumblrDashboardView:i}},63,,,,,,,,,,,,function(t,e,n){var r,o,i,a,u,s,c,l=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;s=n(9),i=n(13).MainController,u=n(63),o=Backbone.Radio.channel("global"),a=Backbone.Radio.channel("messages"),c=new Backbone.Model({entries:[{name:"Profile",url:"#profile"},{name:"Map",url:"#profile/mapview"},{name:"Settings",url:"#profile/editconfig"},{name:"Change Password",url:"#profile/chpassword"}]}),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.sidebarclass=u,e.prototype.sidebar_model=c,e.prototype.show_profile=function(){return this._make_sidebar(),n.e(0,function(t){return function(){var e,r,i;return e=n(190),r=o.request("current-user"),i=new e({model:r}),t._show_content(i)}}(this))},e.prototype.view_map=function(){return this._make_sidebar(),n.e(0,function(t){return function(){var e,r,i;return e=n(191),r=o.request("current-user"),i=new e({model:r}),t._show_content(i)}}(this))},e.prototype.edit_config=function(){return this._make_sidebar(),n.e(0,function(t){return function(){var e,r,i;return e=n(189),r=o.request("current-user"),i=new e({model:r}),t._show_content(i)}}(this))},e.prototype.change_password=function(){return this._make_sidebar(),n.e(0,function(t){return function(){var e,r,i;return e=n(188),r=o.request("current-user"),i=new e({model:r}),t._show_content(i)}}(this))},e}(i),t.exports=r},function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d;r=n(5),f=n(4),o=n(2),s=n(3),i=n(36).BaseCollection,d=n(68),l=d.User,a=d.CurrentUser,u=o.Radio.channel("global"),c=o.Radio.channel("messages"),p=o.Radio.channel("userprofile"),p.reply("update-user-config",function(){return console.log("update-user-config called")}),t.exports={}},function(t,e,n){var r,o,i,a,u,s=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=n(2),o=n(3),a=n(8),u=a.renderable(function(t){var e;return e=t.name,a.ul("#user-menu.ctx-menu.nav.navbar-nav",function(){return a.li(".dropdown",function(){return a.a(".dropdown-toggle",{"data-toggle":"dropdown"},function(){return void 0===e?a.text("Guest"):a.text(e),a.b(".caret")}),a.ul(".dropdown-menu",function(){var n,r,o,i,u;if(a.li(function(){return a.a({href:"/blog"},"Blog")}),void 0===e)return a.li(function(){return a.a({href:"/#frontdoor/login"},"login")});for(a.li(function(){return a.a({href:"#profile"},"Profile Page")}),n=!1,i=t.roles,r=0,o=i.length;r<o;r++)if(u=i[r],"Owner"===u.name){n=!0;break}return n&&(a.li(function(){var t;return t="/blog/ghost",a.a({href:t},"Administer Blog")}),a.li(function(){var t,e;return t="/admin",e=window.location.pathname,""===e.split(t)[0]&&(t="#"),a.a({href:t},"Administer Site")})),a.li(function(){return a.a({href:"/blog/logout"},"Logout")})})})})}),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template=u,e}(r.Marionette.ItemView),t.exports=i},function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_,h=function(t,e){return function(){return t.apply(e,arguments)}},m=function(t,e){function n(){this.constructor=t}for(var r in e)y.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},y={}.hasOwnProperty;r=n(5),l=n(4),i=n(2),s=n(3),u=i.Radio.channel("global"),c=i.Radio.channel("messages"),f=function(){return{id:r('meta[name="client-id"]').attr("value"),secret:r('meta[name="client-secret"]').attr("value")}},p=function(){return JSON.parse(localStorage.getItem("ghost-blog:session"))},d=function(){var t;return t=p().authenticated,t.token_type+" "+t.access_token},_=function(t){return t.setRequestHeader("Authorization",d())},o=6e4,a=function(t){function e(){return this.triggerRefresh=h(this.triggerRefresh,this),e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.tokenUrl="/blog/ghost/api/v0.1/authentication/token",e.prototype.getTime=function(){return(new Date).getTime()},e.prototype.state={expires_at:0},e.prototype.load=function(){var t,e;return e=p(),t=null!=e?e.authenticated:void 0,t&&(this.state=t),this.state},e.prototype.save=function(t){var e,n,r;return console.log("Saving state",t),r=t.time,delete t.time,e=1e3*parseInt(t.expires_in),t.expires_at=r+e,t.authenticator="authenticator:oauth2",(null!=t?t.refresh_token:void 0)||(console.log("saving refresh token"),t.refresh_token=this.state.refresh_token),this.state=t,n=p()||{},n.authenticated=this.state,localStorage.setItem("ghost-blog:session",JSON.stringify(n))},e.prototype.isAuthenticated=function(){return this.load(),this.getTime()<this.state.expires_at},e.prototype.expiresIn=function(){return this.isAuthenticated()?this.state.expires_at-this.getTime():0},e.prototype.triggerRefresh=function(){var t;return this.isAuthenticated()?(console.log("triggerRefresh called"),t=this.expiresIn()/6e4,console.log("expires_in",t),this.expiresIn()<=0?(console.log("performing refresh",this.isAuthenticated()),this.refresh(),void setTimeout(this.triggerRefresh,o)):setTimeout(this.triggerRefresh,o)):(console.log("performing refresh",this.isAuthenticated()),this.refresh(),setTimeout(this.triggerRefresh,o))},e.prototype.sendAuthHeader=function(t){return _(t)},e.prototype.access=function(t,e){var n,o;return this.isAuthenticated()?this.trigger("success",this.state,this):(o=this.getTime(),n=f(),r.ajax({url:this.tokenUrl,type:"POST",data:{grant_type:"password",client_id:n.id,client_secret:n.secret,username:t,password:e},dataType:"json",success:function(t){return function(e){return e.time=o,t.save(e),t.trigger("refresh",e,t)}}(this),error:function(t){return function(t){var e,n,r,o,i;for(console.log("error",t),console.log(t.responseJSON),o=t.responseJSON.errors,i=[],n=0,r=o.length;n<r;n++)e=o[n],i.push(c.request("warning",e.message));return i}}(this)}))},e.prototype.refresh=function(){var t,e,n;return console.log("refresh called"),this.isAuthenticated()&&(e="No authentication data, use access method first.",console.log(e),this.trigger("error",e,this)),n=this.getTime(),t=f(),r.ajax({url:this.tokenUrl,type:"POST",data:{grant_type:"refresh_token",client_id:t.id,client_secret:t.secret,refresh_token:this.state.refresh_token},dataType:"json",headers:"authorization"},d(),{success:function(t){return function(e,r,o){return console.log("refresh->success",e),console.log(r),e.time=n,t.save(e),t.trigger("refresh",response,t),console.log("success",response)}}(this),error:function(t){console.log("refresh->ERROR",this),self.trigger("error",t,this)}})},e}(s.Object),t.exports=a},function(t,e,n){var r,o,i,a,u,s,c,l,p,f,d,_=function(t,e){function n(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h={}.hasOwnProperty;r=n(5),d=n(4),o=n(2),c=n(3),a=n(62).BaseLocalStorageCollection,i=n(36).BaseCollection,s=o.Radio.channel("global"),l=o.Radio.channel("messages"),u=o.Radio.channel("static-documents"),p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.url=function(){return"/assets/documents/"+this.id+".md"},e.prototype.fetch=function(t){return t=d.extend(t||{},{dataType:"text"}),e.__super__.fetch.call(this,t)},e.prototype.parse=function(t){return{content:t}},e}(o.Model),f=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.model=p,e}(i),u.reply("get-document",function(t){var e;return e=new p({id:t})}),t.exports={StaticDocument:p}},function(t,e,n){var r,o,i,a,u,s,c,l,p=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;r=n(5),l=n(5),u=n(4),o=n(2),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.defaults={apiRoot:"/api/dev",brand:{name:"Brand",url:"/"},container:"container",frontdoor_app:"frontdoor",hasUser:!1,needUser:!1,frontdoor_sidebar:[{name:"Home",url:"/"}],applets:[],applet_menus:[],regions:{},routes:[]},e}(o.Model),c={label:"Applets",applets:["foo","bar","another"],single_applet:!1,url:"/this/is/used/if/applets/is/empty/for/plain/link"},s={mainview:"body",navbar:"#navbar-view-container",editbar:"#editor-bar-container",sidebar:"#sidebar",content:"#main-content",messages:"#messages",footer:"#footer",modal:"#modal",usermenu:"#user-menu",search:"#form-search-container"},a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.regions=s,e}(i),t.exports={BaseAppModel:i,DefaultAppModel:a,appregions:s}}]);